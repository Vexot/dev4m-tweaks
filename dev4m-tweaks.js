(()=>{"use strict";const t={AAA:"https://cdn.discordapp.com/emojis/626147013070684161.gif?v=1",thonk_smile:"https://cdn.discordapp.com/emojis/451214432131874837.png?v=1",flushing:"https://cdn.discordapp.com/emojis/808498786279882762.gif?v=1",flusheando:"https://cdn.discordapp.com/emojis/808498786279882762.gif?v=1",ice_cube_neutral:"https://cdn.discordapp.com/emojis/817498095959932993.png?v=1",xdd:"https://cdn.discordapp.com/emojis/408457517832732675.png?v=1",xd:"https://cdn.discordapp.com/emojis/408457388144853004.png?v=1",bit_bobux:"https://cdn.discordapp.com/emojis/817483409324113930.png?v=1",pensive_splash:"https://cdn.discordapp.com/emojis/591821888175603713.gif?v=1",premium:"https://cdn.discordapp.com/emojis/614587108350492702.png?v=1"};function e(e){e.addEventListener("input",(()=>{e.value=e.value.replace(/:(.*?):/,((e,s)=>{const n=t[s];return n?`<img src="${n}" width=20 height=20 title=":${s}:">`:`:${s}:`}))}))}function s(t,e){return`<span style="border: 2px solid ${e};border-radius: 10000px;padding: 2px 8px;font-size: 10px;">\n${t}</span>`.replace("\n","")}const n='"http://www.w3.org/2000/svg"',o='"color:#e7c300 !important"',i={op:s("OP","green"),visitor:s("VISITOR (TL0)","#95A5A6"),member:s("MEMBER (TL1)","#68D1F1"),regular:s("REGULAR (TL2)","#4B9CFA"),editor:s("EDITOR (TL3)","#AC96EC"),leader:s("LEADER (TL4)","#D7C7FF"),bobox:s("BOBUX MAN","#00B7F6"),godefficients:s("GODEFFICIENTS","#8119d1"),suspended:`<span title="Suspended">\n<svg class="fa d-icon d-icon-ban svg-icon svg-string" xmlns=${n} style="color:#e45735 !important">\n<use xlink:href="#ban"></use></svg></span>`.replace("\n"," "),extensiondev:`<span title="Extension Developer">\n<svg class="fa d-icon d-icon-code svg-icon svg-string" xmlns=${n} style="color:#009FFF !important">\n<use xlink:href="#code"></use></svg></span>`.replace("\n"," "),top:`<span title="Top Contributor">\n<svg class="fa d-icon d-icon-arrow-up svg-icon svg-string" xmlns=${n} style=${o}>\n<use xlink:href="#arrow-up"></use></svg></span>`.replace("\n"," "),sage:`<span title="Sage">\n<svg class="fa d-icon d-icon-users svg-icon svg-string" xmlns=${n} style=${o}>\n<use xlink:href="#users"></use></svg></span>`.replace("\n"," "),editor:`<span title="Editor">\n<svg class="fa d-icon d-icon-user-check svg-icon svg-string" xmlns=${n} style=${o}>\n<use xlink:href="#user-check"></use></svg></span>`.replace("\n"," ")},r={1311:"bobox",112950:"godefficients",34253:"extensiondev"},a={102:"top",103:"sage",104:"editor"},c={},l={},d={tl0:[],tl1:[],tl2:[],tl3:[],tl4:[]},u=["visitor","member","regular","editor","leader"];let p=[],f=[],g={},m=[];const v={method:"GET"},h="-!--user-flaired";function b(t,e){for(const s of t.childNodes)if(s.classList.contains(e))return s;return null}function x(t,e){const s=i[e];let n;for(let e of t.getElementsByClassName("row"))if(n=b(e,"topic-body"),n)break;const o=b(n,"topic-meta-data");b(o,"names").innerHTML+=s}function w(t){!function(t){t.parentElement.classList.contains("topic-owner")&&(t.classList.contains("-!-has-op-flairs")||(x(t,"op"),t.className+=" -!-has-op-flairs"))}(t),async function(t){if(t.classList.contains(h))return;t.className+=` ${h}`;const e=t.getAttribute("data-user-id"),s=t.getAttribute("data-post-id");if(null===s)return;const{trustLevel:n,userInfo:o}=await async function(t,e){const s={};for(let e=0;e<5;e++)if(-1!==d[`tl${e}`].indexOf(t)){s.trustLevel=u[e];break}const n=await fetch(`https://devforum.roblox.com/posts/${e}.json`,v);if(!n.ok)return console.log(n.statusText),{error:n};const o=await n.blob(),i=JSON.parse(await o.text());return d[`tl${i.trust_level}`].push(t),s.trustLevel=u[i.trust_level],s.userInfo=i,s}(e,s).catch(console.log);let i,r=!1;o&&(r=await async function(t,e){if(-1!==p.indexOf(t))return!0;if(-1!==f.indexOf(t))return!1;const s=await fetch(`https://devforum.roblox.com/u/${e.username}.json`,v);if(!s.ok)throw new Error(`HTTP error! Status: ${s.status}`);const n=await s.blob();return JSON.parse(await n.text()).user.suspended_till?(p.push(t),!0):(f.push(t),!1)}(t.getAttribute("data-user-id"),o).catch(console.log)),o&&(i=await async function(t,e){if(g[t])return g[t];if(-1!==m.indexOf(t))return!1;const s=await fetch(`https://devforum.roblox.com/u/${e.username}.json`,v);if(!s.ok)throw new Error(`HTTP error! Status: ${s.status}`);const n=await s.blob(),o=JSON.parse(await n.text()),i=[];if(console.log(o.user.username),Object.keys(o.badges).forEach((function(t){a[o.badges[t].id]&&(i[o.badges[t].id]||i.push(o.badges[t].id))})),0===i.length)return m.push(t),!1;var r=Math.max.apply(Math,i);return r?(console.log(r),g[t]=[a[r]],a[r]):void 0}(t.getAttribute("data-user-id"),o).catch(console.log)),n&&x(t,n),i&&x(t,i),r&&x(t,"suspended")}(t),function(t){if(t.classList.contains("-!-has-user-flairs"))return;const e=t.getAttribute("data-user-id"),s=t.getAttribute("data-post-id"),n=t.getAttribute("data-topic-id");r[e]&&x(t,r[e]),c[s]&&x(t,c[s]),l[n]&&x(t,l[n]),t.className+=" -!-has-user-flairs"}(t)}window.addEventListener("load",(function(){setInterval((()=>{for(let t of document.getElementsByTagName("article"))w(t);for(let t of document.getElementsByClassName("d-editor-input"))e(t);for(let t of document.getElementsByClassName("flag-message"))e(t)}),1e3)}))})();